

<body>
    <div class="container">
        <div class="div-home">
            <a type="button" href="/dashboard" class="home-link">Home</a>
        </div>

        <div class="form-header">
            <h2>Marriage Registration Form</h2>
            <p class="form-description">Please fill in all required fields marked with <span class="required">*</span>
            </p>
        </div>

        <form [formGroup]="marriageForm" (ngSubmit)="onSubmitMarriageForm()" class="formContainer">

            <!-- Marriage Certificate Section -->
            <div class="section">
                <h3>Marriage Certificate Information</h3>

                <div class="form-group">
                    <label for="marriage_certificate_no">Marriage Certificate No: <span
                            class="required">*</span></label>
                    <input type="text" id="marriage_certificate_no" formControlName="marriage_certificate_no"
                        placeholder="Enter marriage certificate number"
                        [class.error]="hasFieldError('marriage_certificate_no')">
                    <span *ngIf="hasFieldError('marriage_certificate_no')" class="error-message">
                        {{ getFieldError('marriage_certificate_no') }}
                    </span>
                </div>

                <div class="form-group">
                    <label for="entry_no">Entry No: <span class="required">*</span></label>
                    <input type="text" id="entry_no" formControlName="entry_no" placeholder="Enter entry number"
                        [class.error]="hasFieldError('entry_no')">
                    <span *ngIf="hasFieldError('entry_no')" class="error-message">
                        {{ getFieldError('entry_no') }}
                    </span>
                </div>

                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="county">County: <span class="required">*</span></label>
                        <input type="text" id="county" formControlName="county" placeholder="Enter county"
                            [class.error]="hasFieldError('county')">
                        <span *ngIf="hasFieldError('county')" class="error-message">
                            {{ getFieldError('county') }}
                        </span>
                    </div>
                    <div class="form-group half-width">
                        <label for="subcounty">Sub County: <span class="required">*</span></label>
                        <input type="text" id="subcounty" formControlName="subcounty" placeholder="Enter sub county"
                            [class.error]="hasFieldError('subcounty')">
                        <span *ngIf="hasFieldError('subcounty')" class="error-message">
                            {{ getFieldError('subcounty') }}
                        </span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="place_of_marriage">Place of Marriage: <span class="required">*</span></label>
                    <input type="text" id="place_of_marriage" formControlName="place_of_marriage"
                        placeholder="Enter place of marriage" [class.error]="hasFieldError('place_of_marriage')">
                    <span *ngIf="hasFieldError('place_of_marriage')" class="error-message">
                        {{ getFieldError('place_of_marriage') }}
                    </span>
                </div>

                <div class="form-group">
                    <label for="marriage_date">Date of Marriage: <span class="required">*</span></label>
                    <input type="date" id="marriage_date" formControlName="marriage_date"
                        [class.error]="hasFieldError('marriage_date')">
                    <span *ngIf="hasFieldError('marriage_date')" class="error-message">
                        {{ getFieldError('marriage_date') }}
                    </span>
                </div>
            </div>

            <!-- Bridegroom Section -->
            <div class="section">
                <h3>Bridegroom Information</h3>

                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="first_name_groom">First Name: <span class="required">*</span></label>
                        <input type="text" id="first_name_groom" formControlName="first_name_groom"
                            placeholder="Enter first name" [class.error]="hasFieldError('first_name_groom')">
                        <span *ngIf="hasFieldError('first_name_groom')" class="error-message">
                            {{ getFieldError('first_name_groom') }}
                        </span>
                    </div>
                    <div class="form-group half-width">
                        <label for="last_name_groom">Last Name: <span class="required">*</span></label>
                        <input type="text" id="last_name_groom" formControlName="last_name_groom"
                            placeholder="Enter last name" [class.error]="hasFieldError('last_name_groom')">
                        <span *ngIf="hasFieldError('last_name_groom')" class="error-message">
                            {{ getFieldError('last_name_groom') }}
                        </span>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="age_groom">Age: <span class="required">*</span></label>
                        <input type="number" id="age_groom" formControlName="age_groom" placeholder="Enter age" min="18"
                            max="150" [class.error]="hasFieldError('age_groom')">
                        <span *ngIf="hasFieldError('age_groom')" class="error-message">
                            {{ getFieldError('age_groom') }}
                        </span>
                    </div>
                    <div class="form-group half-width">
                        <label for="occupation_groom">Occupation: <span class="required">*</span></label>
                        <input type="text" id="occupation_groom" formControlName="occupation_groom"
                            placeholder="Enter occupation" [class.error]="hasFieldError('occupation_groom')">
                        <span *ngIf="hasFieldError('occupation_groom')" class="error-message">
                            {{ getFieldError('occupation_groom') }}
                        </span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="residence_groom">Residence: <span class="required">*</span></label>
                    <input type="text" id="residence_groom" formControlName="residence_groom"
                        placeholder="Enter residence" [class.error]="hasFieldError('residence_groom')">
                    <span *ngIf="hasFieldError('residence_groom')" class="error-message">
                        {{ getFieldError('residence_groom') }}
                    </span>
                </div>
            </div>

            <!-- Bride Section -->
            <div class="section">
                <h3>Bride Information</h3>

                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="first_name_bride">First Name: <span class="required">*</span></label>
                        <input type="text" id="first_name_bride" formControlName="first_name_bride"
                            placeholder="Enter first name" [class.error]="hasFieldError('first_name_bride')">
                        <span *ngIf="hasFieldError('first_name_bride')" class="error-message">
                            {{ getFieldError('first_name_bride') }}
                        </span>
                    </div>
                    <div class="form-group half-width">
                        <label for="last_name_bride">Last Name: <span class="required">*</span></label>
                        <input type="text" id="last_name_bride" formControlName="last_name_bride"
                            placeholder="Enter last name" [class.error]="hasFieldError('last_name_bride')">
                        <span *ngIf="hasFieldError('last_name_bride')" class="error-message">
                            {{ getFieldError('last_name_bride') }}
                        </span>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="age_bride">Age: <span class="required">*</span></label>
                        <input type="number" id="age_bride" formControlName="age_bride" placeholder="Enter age" min="18"
                            max="150" [class.error]="hasFieldError('age_bride')">
                        <span *ngIf="hasFieldError('age_bride')" class="error-message">
                            {{ getFieldError('age_bride') }}
                        </span>
                    </div>
                    <div class="form-group half-width">
                        <label for="occupation_bride">Occupation: <span class="required">*</span></label>
                        <input type="text" id="occupation_bride" formControlName="occupation_bride"
                            placeholder="Enter occupation" [class.error]="hasFieldError('occupation_bride')">
                        <span *ngIf="hasFieldError('occupation_bride')" class="error-message">
                            {{ getFieldError('occupation_bride') }}
                        </span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="residence_bride">Residence: <span class="required">*</span></label>
                    <input type="text" id="residence_bride" formControlName="residence_bride"
                        placeholder="Enter residence" [class.error]="hasFieldError('residence_bride')">
                    <span *ngIf="hasFieldError('residence_bride')" class="error-message">
                        {{ getFieldError('residence_bride') }}
                    </span>
                </div>
            </div>

            <!-- Witnesses Section -->
            <div class="section">
                <h3>Witnesses Information</h3>

                <h4>First Witness</h4>
                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="first_name_witness1">First Name: <span class="required">*</span></label>
                        <input type="text" id="first_name_witness1" formControlName="first_name_witness1"
                            placeholder="Enter first name" [class.error]="hasFieldError('first_name_witness1')">
                        <span *ngIf="hasFieldError('first_name_witness1')" class="error-message">
                            {{ getFieldError('first_name_witness1') }}
                        </span>
                    </div>
                    <div class="form-group half-width">
                        <label for="last_name_witness1">Last Name: <span class="required">*</span></label>
                        <input type="text" id="last_name_witness1" formControlName="last_name_witness1"
                            placeholder="Enter last name" [class.error]="hasFieldError('last_name_witness1')">
                        <span *ngIf="hasFieldError('last_name_witness1')" class="error-message">
                            {{ getFieldError('last_name_witness1') }}
                        </span>
                    </div>
                </div>

                <h4>Second Witness <span class="optional-text">(Optional)</span></h4>
                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="first_name_witness2">First Name:</label>
                        <input type="text" id="first_name_witness2" formControlName="first_name_witness2"
                            placeholder="Enter first name (optional)">
                    </div>
                    <div class="form-group half-width">
                        <label for="last_name_witness2">Last Name:</label>
                        <input type="text" id="last_name_witness2" formControlName="last_name_witness2"
                            placeholder="Enter last name (optional)">
                    </div>
                </div>
            </div>

            <!-- Additional Information Section -->
            <div class="section">
                <h3>Additional Information</h3>

                <div class="form-group">
                    <label for="registrar">Registrar: <span class="required">*</span></label>
                    <input type="text" id="registrar" formControlName="registrar" placeholder="Enter registrar name"
                        [class.error]="hasFieldError('registrar')">
                    <span *ngIf="hasFieldError('registrar')" class="error-message">
                        {{ getFieldError('registrar') }}
                    </span>
                </div>

                <div class="form-group">
                    <label for="ref_number">Reference Number: <span class="required">*</span></label>
                    <input type="text" id="ref_number" formControlName="ref_number" placeholder="Enter reference number"
                        [class.error]="hasFieldError('ref_number')">
                    <span *ngIf="hasFieldError('ref_number')" class="error-message">
                        {{ getFieldError('ref_number') }}
                    </span>
                </div>
            </div>

            <!-- File Upload Section -->
            <div class="section">
                <h3>Marriage Certificate Document</h3>

                <div class="form-group">
                    <label for="file_upload">Upload Marriage Certificate (Optional):</label>
                    <div class="file-upload-container">
                        <input type="file" id="file_upload" accept=".jpg,.jpeg,.png,.pdf"
                            (change)="onFileSelected($event)" class="file-input">
                        <label for="file_upload" class="file-upload-label">
                            <span class="upload-icon">📁</span>
                            <span *ngIf="!selectedFile" class="upload-text">Choose File</span>
                            <span *ngIf="selectedFile" class="upload-text">Change File</span>
                            <small class="file-info-text">JPEG, PNG, PDF - Max 5MB</small>
                        </label>
                    </div>

                    <div *ngIf="selectedFile" class="file-preview">
                        <div class="file-details">
                            <span class="file-icon">📄</span>
                            <div class="file-text">
                                <strong>{{ getFileName() }}</strong>
                                <small>{{ getFileSize() }}</small>
                            </div>
                            <button type="button" class="remove-file-btn" (click)="removeSelectedFile()"
                                title="Remove file">✕</button>
                        </div>
                    </div>

                    <div *ngIf="isUploading" class="upload-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" [style.width.%]="uploadProgress"></div>
                        </div>
                        <small>Uploading... {{ uploadProgress }}%</small>
                    </div>
                </div>
            </div>

            <!-- Messages -->
            <div *ngIf="successMessage" class="alert alert-success">
                <span class="alert-icon">✅</span>
                {{ successMessage }}
            </div>

            <div *ngIf="errorMessage" class="alert alert-error">
                <span class="alert-icon">❌</span>
                {{ errorMessage }}
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" (click)="navigateToConfirmation()">
                    ← Back
                </button>
                <button type="submit" class="btn btn-primary" [disabled]="marriageForm.invalid || isUploading">
                    <!-- <span *ngIf="!isUploading">Submit Form</span>
                    <span *ngIf="isUploading">Processing...</span> -->
                    Submit
                </button>
            </div>
        </form>
    </div>
</body>

